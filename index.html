<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Elizabeth's Rogue Plane Ride</title>
  <link rel="stylesheet" href="style.css">
</head>
<body class="airborne">

  <div class="card">
    <h1>âœˆï¸ Elizabethâ€™s Rogue Plane Ride</h1>
    <p class="subtitle">Departure: Nashville Â· Destination: San Francisco</p>

    <p class="riddle">What is your name in my phone?</p>

    <form
      id="valentineForm"
      action="https://formspree.io/f/xreazkva"
      method="POST"
    >

      <input
        type="text"
        name="answer"
        id="answer"
        placeholder="Enter answer"
        autocomplete="off"
        required
      >

      <!-- metadata sent to you -->
      <input type="hidden" name="room" value="Room 1 â€“ Phone Name">
      <input type="hidden" name="result" id="result">
      <input type="hidden" name="_subject" value="âœˆï¸ Escape Room Attempt Logged">

      <button type="button" onclick="checkAnswer()">Unlock</button>
    </form>

    <!-- THIS was missing -->
    <p id="message" class="message"></p>
  </div>

 <script>
  function checkAnswer() {
    const input = document.getElementById("answer").value
      .toLowerCase()
      .trim();

    const message = document.getElementById("message");
    const form = document.getElementById("valentineForm");
    const result = document.getElementById("result");

    if (!input) {
      message.textContent = "ğŸ’­ Type something first.";
      return;
    }

    // Determine correctness
    const isCorrect = input === "min solstrale";
    result.value = isCorrect ? "Correct" : "Wrong: " + input;

    // Send silently to Formspree (NO redirect)
    fetch(form.action, {
      method: form.method,
      body: new FormData(form),
      headers: { "Accept": "application/json" }
    }).then(() => {
      if (isCorrect) {
        message.textContent = "âœˆï¸ Boarding completeâ€¦";
        window.location.href = "room2.html"; // YOU control progression
      } else {
        message.textContent = "âŒ Try again, Sunshine â˜€ï¸";
      }
    }).catch(() => {
      message.textContent = "âš ï¸ Signal lostâ€¦ try again.";
    });
  }
</script>

</body>
</html>
